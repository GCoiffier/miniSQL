<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-02-27 Tue 19:01 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DBDM Project: mini SQL over CSV files</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ecoquery" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">DBDM Project: mini SQL over CSV files</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org91c4f5f">1. CSV MiniSQL Engine (8 points)</a>
<ul>
<li><a href="#org2a885ce">1.1. Relational Algebra Engine Over CSV (4 points)</a></li>
<li><a href="#org61f4665">1.2. MiniSQL to Relational Algebra Compiler (4 point)</a></li>
</ul>
</li>
<li><a href="#org1f8d86d">2. A Better Algebra Engine (6 points)</a>
<ul>
<li><a href="#orgca179e7">2.1. Collapsing algebra operations (2 points)</a></li>
<li><a href="#org3e5235f">2.2. Simple algebra expression optimization (2+2 points)</a></li>
</ul>
</li>
<li><a href="#org3f84c66">3. Extensions 6+ points)</a>
<ul>
<li><a href="#org4d57c60">3.1. ORDER BY (2 points)</a></li>
<li><a href="#org425dc74">3.2. GROUP BY + Aggregation Functions (4+ points)</a></li>
<li><a href="#org908cd97">3.3. Advanced expressions on atomic values (2 points)</a></li>
<li><a href="#orgf40d704">3.4. Other ideas</a></li>
</ul>
</li>
<li><a href="#orge5911c2">4. Annexes</a>
<ul>
<li><a href="#org2734e33">4.1. CSV file conventions</a></li>
<li><a href="#org5193737">4.2. MiniSQL Syntax</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
The goal of this project is to implement a <i>mini SQL</i> engine that reads data from <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> files.
</p>

<p>
You can work either alone or with one person.
</p>

<p>
The project can be implemented in C++, Java, Python (2.7 or 3.6) or OCaml and should run either on Mac OS X, Ubuntu Linux (16.04 or 17.10) or Fedora Linux (25, 26 or 27).
Whenever possible use "standard" build/dependency toolchains (CMake, Maven/Gradle, Pip, Opam+ocamlbuild).
</p>

<p>
It should be accompanied by a README file containing information on:
</p>
<ul class="org-ul">
<li>the name of the student(s)</li>
<li>the targeted runtime environment (and if necessary the packages to be installed)</li>
<li>the build procedure</li>
<li>any information about technical/design choices you made</li>
</ul>

<div id="outline-container-org91c4f5f" class="outline-2">
<h2 id="org91c4f5f"><span class="section-number-2">1</span> CSV MiniSQL Engine (8 points)</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-org2a885ce" class="outline-3">
<h3 id="org2a885ce"><span class="section-number-3">1.1</span> Relational Algebra Engine Over CSV (4 points)</h3>
<div class="outline-text-3" id="text-1-1">
<p>
First, design a data structures to represent:
</p>
<ul class="org-ul">
<li>Simple relational algebra operators and expressions (selection,
project, cartesian product, relation (<i>i.e.</i> table), renaming,
minus, union).
You can use a simple language for selection conditions (<i>e.g.</i>
boolean connectors and = and &lt; comparisons, without computation of
new values).</li>
<li>Data to be processed (tuples, collections of tuples). 
You can also assume that all atomic data is of the same type (only strings
or only numbers).
Collections of tuples should be writable to CSV format (with a first header line)</li>
</ul>

<p>
Then, implement a simple evaluator for your relational algebra expressions:
</p>
<ul class="org-ul">
<li>a relation is read from a csv file named after the relation (<i>e.g.</i> <code>R.csv</code> for a relation <i>R</i>)</li>
<li>cartesian product will use nested loops</li>
<li>all operators will produce data in an eager way</li>
</ul>

<p>
Note that there are libraries in all proposed languages to read CSV data.
</p>
</div>
</div>

<div id="outline-container-org61f4665" class="outline-3">
<h3 id="org61f4665"><span class="section-number-3">1.2</span> MiniSQL to Relational Algebra Compiler (4 point)</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Write an MiniSQL to algebra compiler:
</p>
<ul class="org-ul">
<li>MiniSQL grammar is given in the annexes</li>
<li>You can start with a simple version where there is no nested queries.</li>
<li><p>
The <code>IN</code> condition can be translated into a join by pushing the
<code>FROM</code> part of the nested query to the <code>FROM</code> part of the englobing
query and by:
</p>
<ul class="org-ul">
<li>merging the WHERE condition of the nested and the global query</li>
<li>adding equalities between attributes of the <code>SELECT</code> of the nested
query and attributes on the left part of the <code>IN</code> keyword</li>
</ul>
<p>
Note that these operations may require a renaming of the relations
of the subquery
</p></li>
<li><p>
If the <code>WHERE</code> condition is a conjunction of atomic conditions, the
<code>NOT IN</code> condition can be transformed into a <code>MINUS</code> statement
between the original (sub)query without the <code>NOT IN</code> condition and a
transformation of the original (sub)query where the <code>NOT IN</code>
condition is replaced by an <code>IN</code> condition.
</p>

<p>
If the original <code>WHERE</code> condition is more complex it can be
transformed in Disjunctive Normal Form an then transformed into
=UNION=s before applying the aforementioned transformation.
</p></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org1f8d86d" class="outline-2">
<h2 id="org1f8d86d"><span class="section-number-2">2</span> A Better Algebra Engine (6 points)</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgca179e7" class="outline-3">
<h3 id="orgca179e7"><span class="section-number-3">2.1</span> Collapsing algebra operations (2 points)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Implement 2 new operators that regroup existing ones:
</p>
<ol class="org-ol">
<li>the ReadSelectProjectRename operator that reads a CSV file, filter lines
and transform remaning tuples keeping only the proper attributes
after renaming</li>
<li>the JoinProjectRename operator that combine two relations in a
&theta;-join and transform resulting tuples keeping only the proper attributes
after renaming (the &theta;-join being a cartesian product
followed by a selection)</li>
</ol>

<p>
Try to use algorithms that are more efficient (in cpu and/or memory) than
what would habe been done using the simple relational algebra
evaluator.
</p>
</div>
</div>

<div id="outline-container-org3e5235f" class="outline-3">
<h3 id="org3e5235f"><span class="section-number-3">2.2</span> Simple algebra expression optimization (2+2 points)</h3>
<div class="outline-text-3" id="text-2-2">
<p>
First, write an optimizer that uses relational algebra equivalence rules to:
</p>
<ol class="org-ol">
<li>push down selections</li>
<li>add projection to discard unneeded attributes as soon as possible</li>
<li>replace subexpressions using the two new introduced operators</li>
</ol>

<p>
Next, try to reorder cartesian products to minimize the number of
cartesian products that are not immediately restricted by a selection
(<i>i.e.</i> that don't correspond to &theta;-joins).
</p>
</div>
</div>
</div>

<div id="outline-container-org3f84c66" class="outline-2">
<h2 id="org3f84c66"><span class="section-number-2">3</span> Extensions 6+ points)</h2>
<div class="outline-text-2" id="text-3">
<p>
You can implement some of the following extensions.
</p>
</div>

<div id="outline-container-org4d57c60" class="outline-3">
<h3 id="org4d57c60"><span class="section-number-3">3.1</span> ORDER BY (2 points)</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Add an <code>ORDER BY</code> statement to MiniSQL and implement it.
</p>
</div>
</div>

<div id="outline-container-org425dc74" class="outline-3">
<h3 id="org425dc74"><span class="section-number-3">3.2</span> GROUP BY + Aggregation Functions (4+ points)</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Add a <code>GROUP BY</code> statement to MiniSQL as well as a some aggregation
functions (<i>i.e.</i> <code>MIN</code>, <code>MAX</code>, &#x2026;) to MiniSQL.
Devise a relational algebra operator that correspond to a <code>SELECT
... FROM Single_Relation GROUP BY ...</code> query and implement it.
Add the GROUP BY functionality to your engine.
You can make some restrictions on the positions where the GROUP BY
statement occurs.
</p>

<p>
You earn 2 additional points for managing subqueries with <code>GROUP BY</code>
that are related to the englobing query.
</p>
</div>
</div>

<div id="outline-container-org908cd97" class="outline-3">
<h3 id="org908cd97"><span class="section-number-3">3.3</span> Advanced expressions on atomic values (2 points)</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Manage two atomic data types in your MiniSQL: strings and numbers.
Add some builtin functions as well as constants to represent and
manipulate these values.
Modify the renaming operator so it can also create new attributes
computed using atomic value expressions.
</p>
</div>
</div>

<div id="outline-container-orgf40d704" class="outline-3">
<h3 id="orgf40d704"><span class="section-number-3">3.4</span> Other ideas</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>Better query optimizer using a cost model</li>
<li>Factorizing joins over union/minus</li>
<li>Various join implementations
<ul class="org-ul">
<li>Computing meta-data on intermediate results for dynamically choose an appropriate join implementation</li>
</ul></li>
<li>Lazy evaluation (<i>e.g.</i> in the form of iterators) to reduce memory usage
<ul class="org-ul">
<li>The possibility to use temporary files if an intermediate result
needs to be materialized and doesn't fit in memory (either
available memory or any limit you decide)</li>
</ul></li>
<li>Benchmarking various version of your query evaluator</li>
<li>Any idea you have</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge5911c2" class="outline-2">
<h2 id="orge5911c2"><span class="section-number-2">4</span> Annexes</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org2734e33" class="outline-3">
<h3 id="org2734e33"><span class="section-number-3">4.1</span> CSV file conventions</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The following assumptions will be made on <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> files:
</p>
<ul class="org-ul">
<li>the first line contains attribute names</li>
<li>every row contains the same number of fields</li>
</ul>
</div>
</div>



<div id="outline-container-org5193737" class="outline-3">
<h3 id="org5193737"><span class="section-number-3">4.2</span> MiniSQL Syntax</h3>
<div class="outline-text-3" id="text-4-2">
<pre class="example">
S ::= "SELECT" ATTS "FROM" RELS "WHERE" COND
    | "(" S ")" "MINUS" "(" S ")"
    | "(" S ")" "UNION" "(" S ")"
ATTS ::= ATTD "," ATTS | ATTD
ATTD ::= ATT | ATT "AS" ID
ATT ::= ID "." ID
ID ::= ...        // matches [A-Za-z][A-Za-z0-9_]+
RELS ::= REL "," RELS | REL
REL ::= FILENAME ID 
      | "(" S ")" ID
COND ::= AND_COND "OR" COND | AND_COND
AND_COND ::= AT_COND "AND" AND_COND | AT_COND
AT_COND ::= ATT "=" ATT
          | ATT "&lt;" ATT
          | ATT "IN" "(" S ")"
          | ATT "NOT" "IN" "(" S ")"
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: ecoquery</p>
<p class="date">Created: 2018-02-27 Tue 19:01</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>